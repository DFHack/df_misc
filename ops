{"version":1,"ops":[{"type":1,"author":{"id":"bb5f60fd2a57443dedcde2e8b99f56880e125356"},"timestamp":1583087000,"metadata":{"github-id":"MDU6SXNzdWU1NzM1OTE1MjA=","github-url":"https://github.com/DFHack/df_misc/issues/12","origin":"github"},"title":"codegen_c_hdr.pl doesn't understand vectors of unions","message":"This script has never properly supported vectors of unions, such as the \"line_subject_target\" field in the structure \"poetic_form_part\" - a recent change to DFHack/df-structures made said union externally-defined, causing the script to emit a TODO comment instead of a syntax error that I could track down and manually fix.\n\nThere are a few other things that need to be fixed as well - the size of `stl-fstream` on 64-bit Windows is now 280 bytes (int64_t[35]), and `$vecpad` should have been removed entirely since vectors aren't padded in 32-bit _or_ 64-bit Windows (ever since Toady switched to Visual C++ 2015).","files":null}]}